import{r as a,j as e,R as _,a as U}from"./client-CtmAUk5n.js";import{F as Y}from"./Footer-BebUWUyK.js";function z(){const[u,h]=a.useState("setup"),[r,y]=a.useState(null),[c,N]=a.useState([]),[l,g]=a.useState([]),[m,x]=a.useState(0),[b,v]=a.useState(!1),[d,C]=a.useState(!1),[w,E]=a.useState(20),[p,M]=a.useState(5),[T,L]=a.useState("A, B, C, D, E"),[A,k]=a.useState(60),[S,F]=a.useState(!1),i=a.useRef(null);a.useEffect(()=>{const s=[];for(let t=0;t<p;t++)s.push(String.fromCharCode(65+t));L(s.join(", "))},[p]),a.useEffect(()=>{if(u==="answer"&&(r!=null&&r.timeLimit)&&m>0)return i.current=window.setInterval(()=>{x(s=>s<=1?(O(),0):s-1)},1e3),()=>{i.current&&clearInterval(i.current)}},[u,m]),a.useEffect(()=>{const s=localStorage.getItem("cbt-config"),t=localStorage.getItem("cbt-app-state");if(s){const n=JSON.parse(s);y(n)}if(t){const n=JSON.parse(t);N(n.answers||[]),g(n.correctAnswers||[]),x(n.remainingSeconds||0),n.currentMode&&h(n.currentMode)}},[]),a.useEffect(()=>{r&&localStorage.setItem("cbt-config",JSON.stringify(r));const s={answers:c,correctAnswers:l,remainingSeconds:m,currentMode:u,timestamp:Date.now()};localStorage.setItem("cbt-app-state",JSON.stringify(s))},[r,c,l,m,u]);const $=s=>{s.preventDefault();const t=T.split(",").map(o=>o.trim()).filter(o=>o);if(t.length!==p){alert(`You need ${p} choice names. Currently you have ${t.length}.`);return}y({questionCount:w,choiceCount:p,choiceNames:t,timeLimit:S?null:A}),N(new Array(w).fill(null)),g(new Array(w).fill(null)),x(S?0:A*60),h("answer")},q=(s,t)=>{const n=[...c];n[s]=t,N(n)},B=(s,t)=>{const n=[...l];n[s]=t,g(n)},D=()=>{const s=c.filter(t=>t===null).length;s>0&&!window.confirm(`${s} questions unanswered. Proceed to grading?`)||(i.current&&clearInterval(i.current),h("grading"),C(!1),v(!1))},O=()=>{i.current&&clearInterval(i.current),alert("â° Time's up! Automatically moving to grading mode."),h("grading"),C(!1),v(!1)},J=()=>{const s=l.filter(t=>t===null).length;if(s>0){alert(`${s} correct answers not entered. Please enter all correct answers.`);return}C(!0),window.scrollTo({top:0,behavior:"smooth"})},P=()=>{window.confirm("Create a new test? Current data will be deleted. Are you sure?")&&(h("setup"),y(null),N([]),g([]),x(0),C(!1),v(!1),localStorage.removeItem("cbt-app-state"),window.scrollTo({top:0,behavior:"smooth"}))},Q=s=>{const t=Math.floor(s/60),n=s%60;return`${t}:${n.toString().padStart(2,"0")}`},G=()=>m<=60?"timer-danger":m<=300?"timer-warning":"",R=()=>{if(!r)return{correct:0,accuracy:0};let s=0;for(let n=0;n<r.questionCount;n++)c[n]===l[n]&&s++;const t=(s/r.questionCount*100).toFixed(1);return{correct:s,accuracy:t}};return e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"app-header",children:[e.jsx("h1",{className:"app-title",children:"ðŸŽ“ CBT Practice Answer Form"}),e.jsx("p",{className:"app-subtitle",children:"Multiple Choice Practice Tool"})]}),u==="setup"&&e.jsx("section",{className:"mode-section active",children:e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"section-title",children:"ðŸ“ Test Setup"}),e.jsxs("form",{className:"setup-form",onSubmit:$,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"questionCount",children:"Number of Questions"}),e.jsx("input",{type:"number",id:"questionCount",inputMode:"numeric",min:"1",max:"200",value:w,onChange:s=>E(parseInt(s.target.value)),required:!0}),e.jsx("span",{className:"input-hint",children:"1 to 200 questions"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"choiceCount",children:"Number of Choices"}),e.jsx("input",{type:"number",id:"choiceCount",inputMode:"numeric",min:"2",max:"10",value:p,onChange:s=>M(parseInt(s.target.value)),required:!0}),e.jsx("span",{className:"input-hint",children:"2 to 10 choices"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"choiceLabels",children:"Choice Labels (comma separated)"}),e.jsx("input",{type:"text",id:"choiceLabels",placeholder:"A, B, C, D, E",value:T,onChange:s=>L(s.target.value),required:!0,autoComplete:"off"}),e.jsx("span",{className:"input-hint",children:"Example: A, B, C, D, E or 1, 2, 3, 4, 5"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"timeLimit",children:"Time Limit (minutes)"}),e.jsxs("div",{className:"time-input-group",children:[e.jsx("input",{type:"number",id:"timeLimit",inputMode:"numeric",min:"0",max:"300",value:A,onChange:s=>k(parseInt(s.target.value)),disabled:S}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",id:"noTimeLimit",checked:S,onChange:s=>{F(s.target.checked),s.target.checked&&k(0)}}),e.jsx("span",{children:"No limit"})]})]}),e.jsx("span",{className:"input-hint",children:'0 for no limit, or check "No limit"'})]}),e.jsxs("button",{type:"submit",className:"btn btn-primary btn-large",children:[e.jsx("span",{className:"btn-icon",children:"ðŸš€"}),"Create Answer Form"]})]})]})}),u==="answer"&&r&&e.jsxs("section",{className:"mode-section active",children:[e.jsxs("div",{className:"mode-header",children:[e.jsxs("div",{className:"mode-info",children:[e.jsx("h2",{className:"section-title",children:"âœï¸ Answer Input"}),e.jsxs("div",{className:"progress-info",children:["Total ",r.questionCount," questions"]})]}),r.timeLimit&&e.jsxs("div",{className:`timer-display ${G()}`,children:[e.jsx("div",{className:"timer-label",children:"Time Remaining"}),e.jsx("div",{className:"timer-value",children:Q(m)})]})]}),e.jsx("div",{className:"answer-grid",children:Array.from({length:r.questionCount}).map((s,t)=>e.jsxs("div",{className:"question-card",children:[e.jsxs("div",{className:"question-number",children:["Question ",t+1]}),e.jsx("div",{className:"choices",children:r.choiceNames.map((n,o)=>e.jsx("button",{type:"button",className:`choice-btn ${c[t]===o?"selected":""}`,onClick:()=>q(t,o),children:n},o))})]},t))}),e.jsxs("div",{className:"mode-actions",children:[e.jsxs("button",{className:"btn btn-primary btn-large",onClick:D,children:[e.jsx("span",{className:"btn-icon",children:"ðŸ’¾"}),"Save Answers and Grade"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>{h("setup"),i.current&&clearInterval(i.current)},children:[e.jsx("span",{className:"btn-icon",children:"â¬…ï¸"}),"Back to Setup"]})]})]}),u==="grading"&&r&&e.jsxs("section",{className:"mode-section active",children:[e.jsxs("div",{className:"mode-header",children:[e.jsx("h2",{className:"section-title",children:"ðŸ“Š Grading"}),d&&e.jsxs("div",{className:"score-display",children:[e.jsxs("div",{className:"score-card",children:[e.jsx("div",{className:"score-label",children:"Correct Answers"}),e.jsxs("div",{className:"score-value",children:[R().correct," / ",r.questionCount]})]}),e.jsxs("div",{className:"score-card",children:[e.jsx("div",{className:"score-label",children:"Accuracy Rate"}),e.jsxs("div",{className:"score-value",children:[R().accuracy,"%"]})]})]})]}),!b&&!d&&e.jsx("div",{className:"grading-controls",children:e.jsx("button",{type:"button",className:"btn btn-secondary btn-large",onClick:()=>v(!0),children:"ðŸ“ Input Correct Answers"})}),e.jsx("div",{className:"answer-grid",children:Array.from({length:r.questionCount}).map((s,t)=>{const n=c[t]===l[t];return e.jsxs("div",{className:`question-card ${d?n?"correct":"incorrect":""}`,children:[e.jsxs("div",{className:"question-number",children:["Question ",t+1]}),e.jsx("div",{className:"choices",children:r.choiceNames.map((o,f)=>{let j="choice-btn";return d?(f===l[t]&&(j+=" correct-answer"),c[t]!==null&&f===c[t]&&!n&&(j+=" wrong-answer")):(c[t]===f&&(j+=" selected"),b&&l[t]===f&&(j+=" selected")),e.jsx("button",{type:"button",className:j,onClick:()=>{b&&!d&&B(t,f)},disabled:!b||d,children:o},f)})})]},t)})}),e.jsxs("div",{className:"mode-actions",children:[b&&!d&&e.jsx("button",{type:"button",className:"btn btn-success btn-large",onClick:J,children:"âœ… Show Grading Results"}),e.jsx("button",{type:"button",className:"btn btn-secondary btn-large",onClick:P,children:"ðŸ”„ Create New Test"})]})]}),e.jsx(Y,{})]})}_.createRoot(document.getElementById("root")).render(e.jsx(U.StrictMode,{children:e.jsx(z,{})}));
