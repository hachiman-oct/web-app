import{r as a,j as e,R as z,a as H}from"./client-CtmAUk5n.js";import{F as K}from"./Footer-BebUWUyK.js";function V(){const[m,f]=a.useState("setup"),[r,T]=a.useState(null),[c,v]=a.useState([]),[u,x]=a.useState([]),[i,C]=a.useState([]),[d,w]=a.useState(0),[p,S]=a.useState(!1),[h,y]=a.useState(!1),[b,$]=a.useState(20),[g,M]=a.useState(5),[k,R]=a.useState("A, B, C, D, E"),[L,E]=a.useState(60),[A,Q]=a.useState(!1),l=a.useRef(null);a.useEffect(()=>{const s=[];for(let t=0;t<g;t++)s.push(String.fromCharCode(65+t));R(s.join(", "))},[g]),a.useEffect(()=>{if(m==="answer"&&(r!=null&&r.timeLimit)&&d>0)return l.current=window.setInterval(()=>{w(s=>s<=1?(G(),0):s-1)},1e3),()=>{l.current&&clearInterval(l.current)}},[m,d]),a.useEffect(()=>{const s=localStorage.getItem("cbt-config"),t=localStorage.getItem("cbt-app-state");if(s){const n=JSON.parse(s);T(n)}if(t){const n=JSON.parse(t);v(n.answers||[]),x(n.correctAnswers||[]),C(n.flaggedQuestions||[]),w(n.remainingSeconds||0),n.currentMode&&f(n.currentMode)}},[]),a.useEffect(()=>{r&&localStorage.setItem("cbt-config",JSON.stringify(r));const s={answers:c,correctAnswers:u,flaggedQuestions:i,remainingSeconds:d,currentMode:m,timestamp:Date.now()};localStorage.setItem("cbt-app-state",JSON.stringify(s))},[r,c,u,i,d,m]);const B=s=>{s.preventDefault();const t=k.split(",").map(o=>o.trim()).filter(o=>o);if(t.length!==g){alert(`You need ${g} choice names. Currently you have ${t.length}.`);return}T({questionCount:b,choiceCount:g,choiceNames:t,timeLimit:A?null:L}),v(new Array(b).fill(null)),x(new Array(b).fill(null)),C(new Array(b).fill(!1)),w(A?0:L*60),f("answer")},D=(s,t)=>{const n=[...c];n[s]=t,v(n)},O=s=>{const t=[...i];t[s]=!t[s],C(t)},J=(s,t)=>{const n=[...u];n[s]=t,x(n)},P=()=>{const s=c.filter(t=>t===null).length;s>0&&!window.confirm(`${s} questions unanswered. Proceed to grading?`)||(l.current&&clearInterval(l.current),f("grading"),y(!1),S(!1))},G=()=>{l.current&&clearInterval(l.current),alert("â° Time's up! Automatically moving to grading mode."),f("grading"),y(!1),S(!1)},_=()=>{const s=u.filter(t=>t===null).length;if(s>0){alert(`${s} correct answers not entered. Please enter all correct answers.`);return}y(!0),window.scrollTo({top:0,behavior:"smooth"})},q=()=>{window.confirm("Create a new test? Current data will be deleted. Are you sure?")&&(f("setup"),T(null),v([]),x([]),C([]),w(0),y(!1),S(!1),localStorage.removeItem("cbt-app-state"),window.scrollTo({top:0,behavior:"smooth"}))},U=s=>{const t=Math.floor(s/60),n=s%60;return`${t}:${n.toString().padStart(2,"0")}`},Y=()=>d<=60?"timer-danger":d<=300?"timer-warning":"",F=()=>{if(!r)return{correct:0,accuracy:0};let s=0;for(let n=0;n<r.questionCount;n++)c[n]===u[n]&&s++;const t=(s/r.questionCount*100).toFixed(1);return{correct:s,accuracy:t}};return e.jsxs("div",{className:"container",children:[e.jsxs("header",{className:"app-header",children:[e.jsx("h1",{className:"app-title",children:"ðŸŽ“ CBT Practice Answer Form"}),e.jsx("p",{className:"app-subtitle",children:"Multiple Choice Practice Tool"})]}),m==="setup"&&e.jsx("section",{className:"mode-section active",children:e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"section-title",children:"ðŸ“ Test Setup"}),e.jsxs("form",{className:"setup-form",onSubmit:B,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"questionCount",children:"Number of Questions"}),e.jsx("input",{type:"number",id:"questionCount",inputMode:"numeric",min:"1",max:"200",value:b,onChange:s=>$(parseInt(s.target.value)),required:!0}),e.jsx("span",{className:"input-hint",children:"1 to 200 questions"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"choiceCount",children:"Number of Choices"}),e.jsx("input",{type:"number",id:"choiceCount",inputMode:"numeric",min:"2",max:"10",value:g,onChange:s=>M(parseInt(s.target.value)),required:!0}),e.jsx("span",{className:"input-hint",children:"2 to 10 choices"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"choiceLabels",children:"Choice Labels (comma separated)"}),e.jsx("input",{type:"text",id:"choiceLabels",placeholder:"A, B, C, D, E",value:k,onChange:s=>R(s.target.value),required:!0,autoComplete:"off"}),e.jsx("span",{className:"input-hint",children:"Example: A, B, C, D, E or 1, 2, 3, 4, 5"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"timeLimit",children:"Time Limit (minutes)"}),e.jsxs("div",{className:"time-input-group",children:[e.jsx("input",{type:"number",id:"timeLimit",inputMode:"numeric",min:"0",max:"300",value:L,onChange:s=>E(parseInt(s.target.value)),disabled:A}),e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",id:"noTimeLimit",checked:A,onChange:s=>{Q(s.target.checked),s.target.checked&&E(0)}}),e.jsx("span",{children:"No limit"})]})]}),e.jsx("span",{className:"input-hint",children:'0 for no limit, or check "No limit"'})]}),e.jsxs("button",{type:"submit",className:"btn btn-primary btn-large",children:[e.jsx("span",{className:"btn-icon",children:"ðŸš€"}),"Create Answer Form"]})]})]})}),m==="answer"&&r&&e.jsxs("section",{className:"mode-section active",children:[e.jsxs("div",{className:"mode-header",children:[e.jsxs("div",{className:"mode-info",children:[e.jsx("h2",{className:"section-title",children:"âœï¸ Answer Input"}),e.jsxs("div",{className:"progress-info",children:["Total ",r.questionCount," questions",i.filter(s=>s).length>0&&e.jsxs("span",{className:"flagged-count",children:[" â€¢ ðŸš© ",i.filter(s=>s).length," flagged"]})]})]}),r.timeLimit&&e.jsxs("div",{className:`timer-display ${Y()}`,children:[e.jsx("div",{className:"timer-label",children:"Time Remaining"}),e.jsx("div",{className:"timer-value",children:U(d)})]})]}),e.jsx("div",{className:"answer-grid",children:Array.from({length:r.questionCount}).map((s,t)=>e.jsxs("div",{className:`question-card ${i[t]?"flagged":""}`,children:[e.jsxs("div",{className:"question-header",children:[e.jsxs("div",{className:"question-number",children:["Question ",t+1]}),e.jsx("button",{type:"button",className:`flag-btn ${i[t]?"flagged":""}`,onClick:()=>O(t),title:i[t]?"Remove flag":"Flag for review",children:i[t]?"ðŸš©":"âš‘"})]}),e.jsx("div",{className:"choices",children:r.choiceNames.map((n,o)=>e.jsx("button",{type:"button",className:`choice-btn ${c[t]===o?"selected":""}`,onClick:()=>D(t,o),children:n},o))})]},t))}),e.jsxs("div",{className:"mode-actions",children:[e.jsxs("button",{className:"btn btn-primary btn-large",onClick:P,children:[e.jsx("span",{className:"btn-icon",children:"ðŸ’¾"}),"Save Answers and Grade"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>{f("setup"),l.current&&clearInterval(l.current)},children:[e.jsx("span",{className:"btn-icon",children:"â¬…ï¸"}),"Back to Setup"]})]})]}),m==="grading"&&r&&e.jsxs("section",{className:"mode-section active",children:[e.jsxs("div",{className:"mode-header",children:[e.jsx("h2",{className:"section-title",children:"ðŸ“Š Grading"}),h&&e.jsxs("div",{className:"score-display",children:[e.jsxs("div",{className:"score-card",children:[e.jsx("div",{className:"score-label",children:"Correct Answers"}),e.jsxs("div",{className:"score-value",children:[F().correct," / ",r.questionCount]})]}),e.jsxs("div",{className:"score-card",children:[e.jsx("div",{className:"score-label",children:"Accuracy Rate"}),e.jsxs("div",{className:"score-value",children:[F().accuracy,"%"]})]})]})]}),!p&&!h&&e.jsx("div",{className:"grading-controls",children:e.jsx("button",{type:"button",className:"btn btn-secondary btn-large",onClick:()=>S(!0),children:"ðŸ“ Input Correct Answers"})}),e.jsx("div",{className:"answer-grid",children:Array.from({length:r.questionCount}).map((s,t)=>{const n=c[t]===u[t];return e.jsxs("div",{className:`question-card ${h?n?"correct":"incorrect":""} ${i[t]?"flagged":""}`,children:[e.jsxs("div",{className:"question-header",children:[e.jsxs("div",{className:"question-number",children:["Question ",t+1]}),i[t]&&e.jsx("div",{className:"flag-indicator",children:"ðŸš©"})]}),e.jsx("div",{className:"choices",children:r.choiceNames.map((o,j)=>{let N="choice-btn";return h?(j===u[t]&&(N+=" correct-answer"),c[t]!==null&&j===c[t]&&!n&&(N+=" wrong-answer")):(!p&&c[t]===j&&(N+=" selected"),p&&u[t]===j&&(N+=" correct-input")),e.jsx("button",{type:"button",className:N,onClick:()=>{p&&!h&&J(t,j)},disabled:!p||h,children:o},j)})})]},t)})}),e.jsxs("div",{className:"mode-actions",children:[p&&!h&&e.jsx("button",{type:"button",className:"btn btn-success btn-large",onClick:_,children:"âœ… Show Grading Results"}),e.jsx("button",{type:"button",className:"btn btn-secondary btn-large",onClick:q,children:"ðŸ”„ Create New Test"})]})]}),e.jsx(K,{})]})}z.createRoot(document.getElementById("root")).render(e.jsx(H.StrictMode,{children:e.jsx(V,{})}));
